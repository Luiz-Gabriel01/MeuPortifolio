<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes" />
  <title>Luiz Gabriel ‚Äî Desenvolvedor Web Full Stack</title>
  <meta name="description"
    content="Portf√≥lio de Luiz Gabriel, desenvolvedor web full stack. Projetos, habilidades, contato e links sociais." />
  <meta property="og:title" content="Luiz Gabriel ‚Äî Desenvolvedor Web Full Stack" />
  <meta property="og:description" content="Projetos, habilidades, contato e links sociais." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="perfil_luiz.png" />
  <meta name="theme-color" content="#8a2be2" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
    integrity="sha512-1ycn6IcaQQ40/J6MdGx3GkMEb2J6bW1Z3S2Z6Bq9H3w4k1bvb7KQkq8AjtK2VHgMHqYFQHq8NQ4S0b+Xr3f3Xg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üë®‚Äçüíª</text></svg>">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Person",
    "name": "Luiz Gabriel",
    "jobTitle": "Desenvolvedor Web Full Stack",
    "url": "https://seu-dominio.exemplo",
    "sameAs": [
      "https://github.com/Luiz-Gabriel01",
      "https://www.linkedin.com/in/luiz-gabriel-450245303/"
    ]
  }
  </script>
</head>

<body>
  <!-- Cosmic Background Canvas -->
  <div id="cosmic-background-canvas"></div>

  <a class="skip" href="#conteudo">Ir para o conte√∫do</a>

  <header>
    <div class="container nav" role="navigation" aria-label="principal">
      <a class="brand" href="#">
        <span class="logo">
          <img src="59118.png" alt="Logo Luiz Gabriel" style="width:28px; height:28px; object-fit:contain;">
        </span>
        <b>Luiz<span>Gabriel</span></b>
      </a>

      <nav class="links" id="navLinks">
        <a href="#projetos">Projetos</a>
        <a href="#habilidades">Habilidades</a>
        <a href="#sobre">Sobre</a>
      </nav>
    </div>
  </header>

  <main id="conteudo">
    <!-- HERO -->
    <section class="hero container reveal">
      <span class="badge"><i class="fa-solid fa-circle-check"></i> Dispon√≠vel para freelance</span>
      <h1 class="gradient" style="margin-top:.6rem">Ol√°, eu sou o Luiz Gabriel.<br> Desenvolvedor Web Full Stack.</h1>
      <p class="sub" style="margin: .9rem 0 1rem">Trabalho com <b>JavaScript</b>, <b>PHP</b>, <b>React</b>,
        <b>Node.js</b> e <b>Python</b>. Curto criar interfaces r√°pidas, acess√≠veis e animadas, al√©m de APIs limpas e
        seguras.
      </p>
      <div class="cta">
        <a class="btn primary" href="#projetos"><i class="fa-solid fa-rocket"></i> Ver projetos</a>
        <a class="btn" href="https://github.com/Luiz-Gabriel01" target="_blank" rel="noopener"><i
            class="fa-brands fa-github"></i> GitHub</a>
        <a class="btn" href="https://www.linkedin.com/in/luiz-gabriel-450245303/" target="_blank" rel="noopener"><i
            class="fa-brands fa-linkedin"></i> LinkedIn</a>
      </div>
      <!-- 3D Ring Canvas -->
      <div id="ring-canvas-container"></div>
    </section>

    <!-- PROJETOS -->
    <section id="projetos" class="container reveal">
      <h2 class="section-title"><span class="dot"></span> Projetos em destaque</h2>
      <p class="muted" style="margin-bottom:1rem">Algumas coisas recentes que desenvolvi. Filtre por stack:</p>

      <div class="row" style="margin-bottom:1rem">
        <button class="btn" data-filter="all">Todos</button>
        <button class="btn" data-filter="react">React</button>
        <button class="btn" data-filter="php">PHP</button>
        <button class="btn" data-filter="node">Node</button>
      </div>

      <div class="grid" id="projectGrid">
        <!-- Card 1 -->
        <article class="card" data-stack="react node">
          <img class="thumb" src="dashBoard.png" alt="Pr√©via do dashboard de analytics" loading="lazy" />
          <div class="card-body">
            <h3>Dashboard Analytics</h3>
            <p class="muted">SPA em React + API Node.js com autentica√ß√£o JWT, charts e dark mode.</p>
            <div class="tags">
              <span class="tag">React</span><span class="tag">Node.js</span><span class="tag">JWT</span>
            </div>
            <div class="row">
              <a class="btn" href="https://github.com/Luiz-Gabriel01/DashboardAnalytics#"
                aria-label="Ver reposit√≥rio no GitHub"><i class="fa-brands fa-github"></i>
                C√≥digo</a>
            </div>
          </div>
        </article>
        <!-- Card 2 -->
        <article class="card" data-stack="php">
          <img class="thumb" src="bairroAlerta.png" alt="Tela de sistema de ocorr√™ncias" loading="lazy" />
          <div class="card-body">
            <h3>Bairro Alerta</h3>
            <p class="muted">Plataforma de relatos de seguran√ßa urbana com login, CRUD e mapa interativo.</p>
            <div class="tags">
              <span class="tag">PHP</span><span class="tag">MySQL</span><span class="tag">Leaflet</span>
            </div>
            <div class="row">
              <a class="btn" href="https://github.com/Luiz-Gabriel01/bairro_alerta"><i class="fa-brands fa-github"></i>
                C√≥digo</a>
            </div>
          </div>
        </article>
        <!-- Card 3 -->
        <article class="card" data-stack="python">
          <img class="thumb" src="" alt="  " loading="lazy" />
          <div class="card-body">
            <h3>Em breve...</h3>
            <p class="muted">...</p>
            <div class="tags">
              <span class="tag">...</span><span class="tag">...</span><span class="tag">...</span>
            </div>
            <div class="row">
              <a class="btn" href="#"><i class="fa-brands fa-github"></i> C√≥digo</a>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- HABILIDADES -->
    <section id="habilidades" class="container reveal">
      <h2 class="section-title"><span class="dot"></span> Habilidades</h2>
      <div class="skills">
        <div class="skill">
          <div class="row" style="justify-content:space-between">
            <h4>JavaScript </h4><span class="muted">Intermedi√°rio+</span>
          </div>
          <div class="meter" aria-hidden="true"><span style="width:88%"></span></div>
        </div>
        <div class="skill">
          <div class="row" style="justify-content:space-between">
            <h4>React (Hooks, Router)</h4><span class="muted">Intermedi√°rio+</span>
          </div>
          <div class="meter"><span style="width:84%"></span></div>
        </div>
        <div class="skill">
          <div class="row" style="justify-content:space-between">
            <h4>Node.js (Express)</h4><span class="muted">Intermedi√°rio+</span>
          </div>
          <div class="meter"><span style="width:78%"></span></div>
        </div>
        <div class="skill">
          <div class="row" style="justify-content:space-between">
            <h4>PHP (PDO, MVC)</h4><span class="muted">Intermedi√°rio</span>
          </div>
          <div class="meter"><span style="width:72%"></span></div>
        </div>
        <div class="skill">
          <div class="row" style="justify-content:space-between">
            <h4>Python(Auto/back)</h4><span class="muted">Intermedi√°rio</span>
          </div>
          <div class="meter"><span style="width:72%"></span></div>
        </div>
        <div class="skill">
          <div class="row" style="justify-content:space-between">
            <h4>HTML / CSS (A11y)</h4><span class="muted">Avan√ßado</span>
          </div>
          <div class="meter"><span style="width:90%"></span></div>
        </div>
      </div>
    </section>

    <!-- SOBRE -->
    <section id="sobre" class="container reveal">
      <h2 class="section-title"><span class="dot"></span> Sobre mim</h2>
      <div class="about"
        style="background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08); border-radius:18px; padding:1rem">
        <img class="avatar" src="perfil_luiz.png" alt="Foto de perfil de Luiz Gabriel" />
        <div>
          <p class="muted">Sou desenvolvedor web full stack. Gosto de transformar ideias em produtos digitais bonitos e
            perform√°ticos. No back crio APIs REST seguras; no front foco em UX acess√≠vel e microintera√ß√µes.</p>
          <div class="timeline" aria-label="linha do tempo">
            <div class="t-item">
              <div class="t-dot"></div>
              <b>2025</b> ‚Äî Plataforma de relatos urbanos (PHP + MySQL + Leaflet).
            </div>
            <div class="t-item">
              <div class="t-dot"></div>
              <b>2025</b> ‚Äî Dashboards React + Node para analytics em tempo real.
            </div>
          </div>
          <div class="row" style="margin-top:.8rem">
            <!-- Bot√£o de e-mail ajustado -->
            <a class="btn" id="emailBtn"><i class="fa-solid fa-envelope"></i> E-mail</a>
            <a class="btn" href="https://wa.me/5581987951962" target="_blank" rel="noopener"><i
                class="fa-brands fa-whatsapp"></i> WhatsApp</a>
            <a class="btn" href="CvLuizGabriel.pdf" download><i class="fa-solid fa-file-arrow-down"></i> Baixar CV</a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">¬© <span id="year"></span> ‚Äî Luiz Gabriel. Todos os direitos reservados.</div>
  </footer>

  <script>

    const $ = (s, el = document) => el.querySelector(s);
    const $$ = (s, el = document) => [...el.querySelectorAll(s)];

    // ========== COSMIC BACKGROUND (FULL PAGE) ==========
    (function initCosmicBackground() {
      const container = $('#cosmic-background-canvas');
      if (!container) return;

      // Scene setup
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });

      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
      container.appendChild(renderer.domElement);

      camera.position.z = 5;

      // Detectar dispositivo m√≥vel/tablet
      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      const isTablet = /(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(navigator.userAgent);

      // Ajustar qualidade baseado no dispositivo (ainda mais reduzido para mobile premium)
      const particleReduction = isMobile ? 0.3 : (isTablet ? 0.6 : 1);

      // Nebula particles (distant haze)
      const nebulaGeometry = new THREE.BufferGeometry();
      const nebulaCount = Math.floor(400 * particleReduction);
      const nebulaPositions = new Float32Array(nebulaCount * 3);
      const nebulaSizes = new Float32Array(nebulaCount);

      for (let i = 0; i < nebulaCount; i++) {
        nebulaPositions[i * 3] = (Math.random() - 0.5) * 20;
        nebulaPositions[i * 3 + 1] = (Math.random() - 0.5) * 15;
        nebulaPositions[i * 3 + 2] = (Math.random() - 0.5) * 10 - 3;
        nebulaSizes[i] = Math.random() * 0.15 + 0.05;
      }

      nebulaGeometry.setAttribute('position', new THREE.BufferAttribute(nebulaPositions, 3));
      nebulaGeometry.setAttribute('size', new THREE.BufferAttribute(nebulaSizes, 1));

      const nebulaMaterial = new THREE.PointsMaterial({
        color: 0x4b0082,
        size: 0.2,
        transparent: true,
        opacity: 0.12,
        blending: THREE.AdditiveBlending,
        sizeAttenuation: true
      });
      const nebulaField = new THREE.Points(nebulaGeometry, nebulaMaterial);
      scene.add(nebulaField);

      // Scattered glowing particles
      const cosmicParticlesGeometry = new THREE.BufferGeometry();
      const cosmicCount = Math.floor(200 * particleReduction);
      const cosmicPositions = new Float32Array(cosmicCount * 3);
      const cosmicVelocities = [];

      for (let i = 0; i < cosmicCount; i++) {
        cosmicPositions[i * 3] = (Math.random() - 0.5) * 18;
        cosmicPositions[i * 3 + 1] = (Math.random() - 0.5) * 12;
        cosmicPositions[i * 3 + 2] = (Math.random() - 0.5) * 8 - 2;

        cosmicVelocities.push({
          x: (Math.random() - 0.5) * 0.004,
          y: (Math.random() - 0.5) * 0.004,
          z: (Math.random() - 0.5) * 0.002
        });
      }

      cosmicParticlesGeometry.setAttribute('position', new THREE.BufferAttribute(cosmicPositions, 3));

      const cosmicParticlesMaterial = new THREE.PointsMaterial({
        color: 0xbb00ff,
        size: 0.03,
        transparent: true,
        opacity: 0.7,
        blending: THREE.AdditiveBlending
      });
      const cosmicParticles = new THREE.Points(cosmicParticlesGeometry, cosmicParticlesMaterial);
      scene.add(cosmicParticles);

      // Network connecting lines
      const networkLines = [];
      const maxDistance = 3;

      function createNetworkLines() {
        networkLines.forEach(line => scene.remove(line));
        networkLines.length = 0;

        const positions = cosmicParticles.geometry.attributes.position.array;

        for (let i = 0; i < cosmicCount; i++) {
          const p1 = new THREE.Vector3(
            positions[i * 3],
            positions[i * 3 + 1],
            positions[i * 3 + 2]
          );

          for (let j = i + 1; j < cosmicCount; j++) {
            const p2 = new THREE.Vector3(
              positions[j * 3],
              positions[j * 3 + 1],
              positions[j * 3 + 2]
            );

            const distance = p1.distanceTo(p2);

            if (distance < maxDistance && Math.random() > 0.88) {
              const lineGeometry = new THREE.BufferGeometry();
              lineGeometry.setAttribute('position', new THREE.Float32BufferAttribute([
                p1.x, p1.y, p1.z,
                p2.x, p2.y, p2.z
              ], 3));

              const lineMaterial = new THREE.LineBasicMaterial({
                color: 0x8a2be2,
                transparent: true,
                opacity: (1 - distance / maxDistance) * 0.15,
                blending: THREE.AdditiveBlending
              });

              const line = new THREE.Line(lineGeometry, lineMaterial);
              networkLines.push(line);
              scene.add(line);
            }
          }
        }
      }

      createNetworkLines();

      // Animation loop
      function animate() {
        requestAnimationFrame(animate);
        const time = Date.now() * 0.001;

        // Nebula slow drift
        nebulaField.rotation.z += 0.0001;
        nebulaField.rotation.y += 0.00005;

        // Cosmic particles slow movement
        const cosmicPos = cosmicParticles.geometry.attributes.position.array;
        for (let i = 0; i < cosmicCount; i++) {
          cosmicPos[i * 3] += cosmicVelocities[i].x;
          cosmicPos[i * 3 + 1] += cosmicVelocities[i].y;
          cosmicPos[i * 3 + 2] += cosmicVelocities[i].z;

          // Boundary wrapping
          if (Math.abs(cosmicPos[i * 3]) > 9) cosmicVelocities[i].x *= -1;
          if (Math.abs(cosmicPos[i * 3 + 1]) > 6) cosmicVelocities[i].y *= -1;
          if (Math.abs(cosmicPos[i * 3 + 2]) > 4) cosmicVelocities[i].z *= -1;
        }
        cosmicParticles.geometry.attributes.position.needsUpdate = true;

        // Update network lines every 90 frames
        if (Math.floor(time * 60) % 90 === 0) {
          createNetworkLines();
        }

        // Pulse network lines
        networkLines.forEach((line, i) => {
          const pulse = Math.sin(time * 0.4 + i * 0.1) * 0.08 + 0.12;
          line.material.opacity = pulse;
        });

        renderer.render(scene, camera);
      }

      animate();

      // Responsive resize
      window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });
    })();
    // ========== END COSMIC BACKGROUND ==========

    // ========== ADVANCED 3D RING ANIMATION (HERO ONLY) ==========
    (function initRing() {
      const container = $('#ring-canvas-container');
      if (!container) return;

      // Scene setup
      const scene = new THREE.Scene();
      let canvasWidth = container.clientWidth;
      let canvasHeight = container.clientHeight;

      // Garantir dimens√µes m√≠nimas para evitar erros
      if (canvasWidth < 100) canvasWidth = 240;
      if (canvasHeight < 100) canvasHeight = 240;

      const camera = new THREE.PerspectiveCamera(75, canvasWidth / canvasHeight, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });

      renderer.setSize(canvasWidth, canvasHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

      // Prevent canvas overflow
      const canvas = renderer.domElement;
      canvas.style.maxWidth = '100%';
      canvas.style.maxHeight = '100%';
      container.appendChild(canvas);

      camera.position.z = 5;

      // Detectar dispositivo m√≥vel para otimiza√ß√£o
      const isMobileDevice = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      const reduceQuality = isMobileDevice || window.innerWidth < 768;

      // Modular ring segments
      const segmentCount = reduceQuality ? 8 : 12;
      const segments = [];
      const segmentGroup = new THREE.Group();

      for (let i = 0; i < segmentCount; i++) {
        const angle = (i / segmentCount) * Math.PI * 2;
        const arcLength = (Math.PI * 2) / segmentCount * 0.85;

        const segmentGeometry = new THREE.TorusGeometry(1.2, 0.05, 16, 32, arcLength);
        const segmentMaterial = new THREE.MeshStandardMaterial({
          color: 0x0a0a0a,
          emissive: 0x8a2be2,
          emissiveIntensity: 0.3,
          metalness: 0.9,
          roughness: 0.3
        });

        const segment = new THREE.Mesh(segmentGeometry, segmentMaterial);
        segment.rotation.z = angle;
        segment.userData = {
          baseRotation: angle,
          offset: Math.random() * 0.1,
          speed: 0.5 + Math.random() * 0.5,
          phase: Math.random() * Math.PI * 2
        };

        segments.push(segment);
        segmentGroup.add(segment);
      }
      scene.add(segmentGroup);

      // Energy core rings
      const coreRings = [];
      for (let i = 0; i < 3; i++) {
        const coreGeometry = new THREE.TorusGeometry(1.2 - i * 0.05, 0.015, 16, 64);
        const coreMaterial = new THREE.MeshBasicMaterial({
          color: 0xbb00ff,
          transparent: true,
          opacity: 0.4 - i * 0.1,
          blending: THREE.AdditiveBlending
        });
        const coreRing = new THREE.Mesh(coreGeometry, coreMaterial);
        coreRing.userData.speed = 0.002 + i * 0.001;
        coreRings.push(coreRing);
        segmentGroup.add(coreRing);
      }

      // Data pulse particles (menos em mobile)
      const dataPulseGeometry = new THREE.BufferGeometry();
      const pulseCount = reduceQuality ? 80 : 150;
      const pulsePositions = new Float32Array(pulseCount * 3);
      const pulseVelocities = [];

      for (let i = 0; i < pulseCount; i++) {
        const angle = Math.random() * Math.PI * 2;
        const radius = 1.2;
        pulsePositions[i * 3] = Math.cos(angle) * radius;
        pulsePositions[i * 3 + 1] = (Math.random() - 0.5) * 0.15;
        pulsePositions[i * 3 + 2] = Math.sin(angle) * radius;

        pulseVelocities.push({
          angle: angle,
          speed: 0.02 + Math.random() * 0.03,
          verticalSpeed: (Math.random() - 0.5) * 0.002
        });
      }

      dataPulseGeometry.setAttribute('position', new THREE.BufferAttribute(pulsePositions, 3));
      const dataPulseMaterial = new THREE.PointsMaterial({
        color: 0xdd88ff,
        size: 0.025,
        transparent: true,
        opacity: 0.9,
        blending: THREE.AdditiveBlending
      });
      const dataPulses = new THREE.Points(dataPulseGeometry, dataPulseMaterial);
      segmentGroup.add(dataPulses);

      // Distortion field particles (menos em mobile)
      const distortionGeometry = new THREE.BufferGeometry();
      const distortionCount = reduceQuality ? 40 : 80;
      const distortionPositions = new Float32Array(distortionCount * 3);

      for (let i = 0; i < distortionCount; i++) {
        const angle = Math.random() * Math.PI * 2;
        const radius = 1.3 + Math.random() * 0.4;
        distortionPositions[i * 3] = Math.cos(angle) * radius;
        distortionPositions[i * 3 + 1] = (Math.random() - 0.5) * 0.6;
        distortionPositions[i * 3 + 2] = Math.sin(angle) * radius;
      }

      distortionGeometry.setAttribute('position', new THREE.BufferAttribute(distortionPositions, 3));
      const distortionMaterial = new THREE.PointsMaterial({
        color: 0x4b0082,
        size: 0.015,
        transparent: true,
        opacity: 0.3,
        blending: THREE.AdditiveBlending
      });
      const distortionField = new THREE.Points(distortionGeometry, distortionMaterial);
      segmentGroup.add(distortionField);

      // Cinematic lighting
      const ambientLight = new THREE.AmbientLight(0x0a0a14, 0.3);
      scene.add(ambientLight);

      const keyLight = new THREE.PointLight(0x8a2be2, 3, 15);
      keyLight.position.set(3, 2, 4);
      scene.add(keyLight);

      const fillLight = new THREE.PointLight(0xbb00ff, 2, 12);
      fillLight.position.set(-3, -2, 3);
      scene.add(fillLight);

      const rimLight = new THREE.PointLight(0xdd88ff, 1.5, 10);
      rimLight.position.set(0, 3, -2);
      scene.add(rimLight);

      // Interaction
      let mouseX = 0;
      let mouseY = 0;
      let targetRotationX = 0.3;
      let targetRotationY = 0;

      // Mouse movement
      document.addEventListener('mousemove', (event) => {
        mouseX = (event.clientX / window.innerWidth) * 2 - 1;
        mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
        targetRotationY = mouseX * 0.4;
        targetRotationX = mouseY * 0.4 + 0.3;
      });

      // Touch support
      document.addEventListener('touchmove', (event) => {
        if (event.touches.length > 0) {
          const touch = event.touches[0];
          mouseX = (touch.clientX / window.innerWidth) * 2 - 1;
          mouseY = -(touch.clientY / window.innerHeight) * 2 + 1;
          targetRotationY = mouseX * 0.4;
          targetRotationX = mouseY * 0.4 + 0.3;
        }
      }, { passive: true });

      // Rota√ß√£o autom√°tica suave em mobile se n√£o houver intera√ß√£o
      let autoRotate = reduceQuality;
      document.addEventListener('touchstart', () => { autoRotate = false; }, { once: true });
      document.addEventListener('mousemove', () => { autoRotate = false; }, { once: true });

      // Animation loop
      function animate() {
        requestAnimationFrame(animate);
        const time = Date.now() * 0.001;

        // Segment self-realignment (mais lento em mobile)
        const segmentSpeed = reduceQuality ? 0.3 : 1;
        segments.forEach((segment, i) => {
          const offset = Math.sin(time * segment.userData.speed * segmentSpeed + segment.userData.phase) * 0.08;
          segment.rotation.z = segment.userData.baseRotation + offset;

          const pulseSpeed = reduceQuality ? 1 : 2;
          const pulse = Math.sin(time * pulseSpeed + i * 0.5) * 0.3 + 0.7;
          segment.material.emissiveIntensity = pulse;
        });

        // Core ring rotation (mais lento em mobile)
        const coreSpeed = reduceQuality ? 0.4 : 1;
        coreRings.forEach((ring, i) => {
          ring.rotation.z += ring.userData.speed * coreSpeed * (i % 2 === 0 ? 1 : -1);
        });

        // Data pulses movement (mais lento em mobile)
        const pulseSpeed = reduceQuality ? 0.5 : 1;
        const positions = dataPulses.geometry.attributes.position.array;
        for (let i = 0; i < pulseCount; i++) {
          const vel = pulseVelocities[i];
          vel.angle += vel.speed * pulseSpeed;

          positions[i * 3] = Math.cos(vel.angle) * 1.2;
          positions[i * 3 + 1] += vel.verticalSpeed * pulseSpeed;
          positions[i * 3 + 2] = Math.sin(vel.angle) * 1.2;

          if (Math.abs(positions[i * 3 + 1]) > 0.2) {
            vel.verticalSpeed *= -1;
          }
        }
        dataPulses.geometry.attributes.position.needsUpdate = true;

        // Distortion field subtle movement
        const distortPos = distortionField.geometry.attributes.position.array;
        for (let i = 0; i < distortionCount; i++) {
          const wave = Math.sin(time * 0.5 + i * 0.1) * 0.01;
          distortPos[i * 3 + 1] += wave;
        }
        distortionField.geometry.attributes.position.needsUpdate = true;
        distortionField.rotation.z += 0.0005;

        // Smooth group rotation (muito mais lento em mobile)
        const groupRotationSpeed = reduceQuality ? 0.3 : 1;
        if (autoRotate) {
          targetRotationY = Math.sin(time * 0.2 * groupRotationSpeed) * 0.3;
        }
        segmentGroup.rotation.x += (targetRotationX - segmentGroup.rotation.x) * 0.05;
        segmentGroup.rotation.y += (targetRotationY - segmentGroup.rotation.y) * 0.05;
        segmentGroup.rotation.z += 0.002 * groupRotationSpeed;

        // Light animation (mais suave em mobile)
        const lightIntensity = reduceQuality ? 0.5 : 1;
        keyLight.intensity = (2.5 + Math.sin(time * 0.8) * 0.5) * lightIntensity;
        fillLight.intensity = (1.8 + Math.cos(time * 1.2) * 0.3) * lightIntensity;

        renderer.render(scene, camera);
      }

      animate();

      // Responsive resize
      window.addEventListener('resize', () => {
        let newWidth = container.clientWidth;
        let newHeight = container.clientHeight;

        // Garantir dimens√µes m√≠nimas
        if (newWidth < 100) newWidth = 240;
        if (newHeight < 100) newHeight = 240;

        camera.aspect = newWidth / newHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(newWidth, newHeight);
      });

      // Orientation change support
      window.addEventListener('orientationchange', () => {
        setTimeout(() => {
          let newWidth = container.clientWidth;
          let newHeight = container.clientHeight;

          // Garantir dimens√µes m√≠nimas
          if (newWidth < 100) newWidth = 240;
          if (newHeight < 100) newHeight = 240;

          camera.aspect = newWidth / newHeight;
          camera.updateProjectionMatrix();
          renderer.setSize(newWidth, newHeight);
        }, 100);
      });
    })();
    // ========== END 3D RING ANIMATION ==========


    $('#year').textContent = new Date().getFullYear();


    const menuBtn = $('#menuBtn');
    const navLinks = $('#navLinks');
    menuBtn?.addEventListener('click', () => {
      const open = navLinks.classList.toggle('open');
      menuBtn.setAttribute('aria-expanded', String(open));
    });


    const themeBtn = $('#themeBtn');
    themeBtn?.addEventListener('click', () => {
      document.documentElement.classList.toggle('light');
    });


    const io = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          e.target.classList.add('on');
          // Anima as barras de skill quando ficam vis√≠veis
          if (e.target.id === 'habilidades') {
            animateSkillBars();
          }
        }
      });
    }, { threshold: .08 });
    $$('.reveal').forEach(el => io.observe(el));

    // Anima as barras de skill
    function animateSkillBars() {
      $$('.meter span').forEach((bar, index) => {
        const currentWidth = bar.style.width;
        bar.style.width = '0';
        setTimeout(() => {
          bar.style.transition = `width 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) ${index * 0.1}s`;
          bar.style.width = currentWidth;
        }, 10);
      });
    }


    const grid = $('#projectGrid');
    $$('#projetos .btn[data-filter]').forEach(btn => {
      btn.addEventListener('click', () => {
        const key = btn.dataset.filter;
        $$('#projetos .btn[data-filter]').forEach(b => b.classList.remove('primary'));
        btn.classList.add('primary');
        [...grid.children].forEach((card, index) => {
          const show = key === 'all' || card.dataset.stack.includes(key);
          card.style.display = show ? '' : 'none';
          if (show) {
            card.style.animation = 'none';
            setTimeout(() => {
              card.style.animation = `fadeIn 0.5s ease ${index * 0.1}s forwards`;
            }, 10);
          }
        });
      });
    });

    // Anima√ß√£o de fade in para cards
    const style = document.createElement('style');
    style.textContent = `
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(12px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    `;
    document.head.appendChild(style);


    const form = document.getElementById('contactForm');
    const statusMsg = document.getElementById('statusMsg');
    form?.addEventListener('submit', async (e) => {
      e.preventDefault();
      if (form.website.value) return; // honeypot anti-bot
      statusMsg.textContent = 'Enviando...';

      const formData = new FormData(form);

      try {
        const resp = await fetch("https://backend12br.infinityfreeapp.com", {
          method: "POST",
          body: formData
        });
        const data = await resp.json();
        if (data.success) {
          statusMsg.textContent = data.message;
          form.reset();
        } else {
          statusMsg.textContent = data.message || "Erro ao enviar.";
        }
      } catch (err) {
        console.error(err);
        statusMsg.textContent = "Erro de conex√£o.";
      }
    });

    document.getElementById("emailBtn").addEventListener("click", function (e) {
      e.preventDefault();
      const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
      if (isMobile) {
        window.location.href = "mailto:luiz.gabriel12br@gmail.com";
      } else {
        window.open("https://mail.google.com/mail/?view=cm&fs=1&to=luiz.gabriel12br@gmail.com", "_blank");
      }
    });
  </script>
</body>

</html>